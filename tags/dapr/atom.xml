<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Dapr on ipfans's Blog</title><link>https://www.4async.com/tags/dapr/</link><description>Recent content in Dapr on ipfans's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 15 May 2021 18:38:00 +0000</lastBuildDate><atom:link href="https://www.4async.com/tags/dapr/atom.xml" rel="self" type="application/rss+xml"/><item><title>æ„å»ºå±äºä½ è‡ªå·±çš„daprç»‘å®šç»„ä»¶</title><link>https://www.4async.com/2021/05/building-your-own-dapr-binding/</link><pubDate>Sat, 15 May 2021 18:38:00 +0000</pubDate><guid>https://www.4async.com/2021/05/building-your-own-dapr-binding/</guid><description>&lt;img src="https://vip1.loli.io/2022/03/26/uJdVWNeXC6Z3Hq8.png" alt="Featured image of post æ„å»ºå±äºä½ è‡ªå·±çš„daprç»‘å®šç»„ä»¶" />åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œåæ§½äº†æ‹–å»¶ç—‡çš„å±å®³ï¼Œå› æ­¤è¿™æ¬¡æˆ‘æ¥åˆ†äº«ä¸€ä¸‹æˆ‘æœ€æ–°æ¨é€åˆ°daprçš„æœ€æ–°çš„ä¸€ä¸ªæ–°çš„ç»‘å®šç»„ä»¶ï¼Œé€šè¿‡è¿™ä¸ªæ¥çœ‹ä¸€ä¸‹å¦‚ä½•å®ç°è‡ªå·±çš„ç»‘å®šç»„ä»¶ã€‚
æ–‡ä¸­æåˆ°çš„PRå¯ä»¥åœ¨ dapr/components-contrib#872 æŸ¥çœ‹å¯¹åº”çš„å…·ä½“ä»£ç ã€‚
ä»€ä¹ˆæ˜¯ dapr çš„ç»‘å®šç»„ä»¶ï¼Ÿ åœ¨daprä¸­ï¼Œç»‘å®šæ˜¯ç”¨äºä½¿ç”¨å¤–éƒ¨ç³»ç»ŸåŠŸèƒ½ï¼ˆæ¯”å¦‚äº‹ä»¶æˆ–è€…æ¥å£ï¼‰çš„æ‰©å±•ç»„ä»¶ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºï¼š
å…é™¤è¿æ¥åˆ°æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ(å¦‚é˜Ÿåˆ—å’Œæ¶ˆæ¯æ€»çº¿)å¹¶è¿›è¡Œè½®è¯¢çš„å¤æ‚æ€§ï¼› èšç„¦äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯å¦‚ä½•ä¸ç³»ç»Ÿäº¤äº’çš„å®ç°ç»†èŠ‚ï¼› ä½¿ä»£ç ä¸å— SDK æˆ–åº“çš„è·Ÿè¸ªï¼› å¤„ç†é‡è¯•å’Œæ•…éšœæ¢å¤ï¼› åœ¨è¿è¡Œæ—¶åœ¨ç»‘å®šä¹‹é—´åˆ‡æ¢ï¼› æ„å»ºå…·æœ‰ç‰¹å®šäºç¯å¢ƒçš„ç»‘å®šçš„å¯ç§»æ¤åº”ç”¨ç¨‹åºï¼Œä¸éœ€è¦è¿›è¡Œä»£ç æ›´æ”¹ï¼› åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œä¹Ÿæåˆ°äº†ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼šä»¥twilioå‘é€çŸ­ä¿¡ä¸ºä¾‹ï¼Œä¸€èˆ¬å¼€å‘è¿‡ç¨‹ä¸­åº”ç”¨ç¨‹åºéœ€è¦ä¾èµ–Twilio SDKæ‰å¯ä»¥å®ç°åŠŸèƒ½ï¼Œä½†æ˜¯å€ŸåŠ©ç»‘å®šç»„ä»¶ï¼Œä½ å¯ä»¥å°†SDKçš„ç»‘å®šè½¬ç§»è‡³daprç¨‹åºé¢†åŸŸå†…ï¼Œåœ¨æœ¬èº«åº”ç”¨ç¨‹åºä¸­ä¸å†ç»‘å®šå¯¹åº”çš„SDKï¼Œä¸ç”¨æ‹…å¿ƒæœªæ¥SDKè¿‡æœŸæˆ–è€…å˜æ›´å¸¦æ¥çš„é‡å¤å·¥ä½œï¼ˆä»…éœ€è¦æ›´æ–°daprå³å¯ï¼‰ã€‚
æ ¹æ®è®¢é˜…çš„è¿›å‡ºæ–¹å‘ï¼Œç»‘å®šç»„ä»¶ä¹Ÿåˆ†ä¸ºè¾“å…¥ç»‘å®šå’Œè¾“å‡ºç»‘å®šã€‚è¿™äº›ç»‘å®šå‡æ˜¯é€šè¿‡yamlæ–‡ä»¶æè¿°ç±»å‹å’Œå…ƒæ•°æ®ï¼Œé€šè¿‡HTTP/gRPCè¿›è¡Œè°ƒç”¨ã€‚
å¦‚ä½•å®ç°è‡ªå·±çš„ç»‘å®šç»„ä»¶ï¼Ÿ å®˜æ–¹ä¾‹å­ä¸­æä¾›äº†ä¸€ä¸ªåŸºç¡€çš„ä»‹ç»ï¼Œä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬ä¹Ÿæåˆ°äº†åœ¨ç¨‹åºä¸­ï¼Œæ ¹æ®è¿›å‡ºæ–¹å‘å¯ä»¥æŠŠç»‘å®šç»„ä»¶åˆ†ä¸ºè¾“å‡ºç»‘å®šå’Œè¾“å…¥ç»‘å®šã€‚ä½ å¯ä»¥é€šè¿‡å®˜æ–¹æ•™ç¨‹ä¸­çš„ä¾‹å­æä¾›æŸ¥çœ‹ï¼š
åœ¨è¿™ä¸ªä¾‹å­ç”¨ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæ ¹æ®æ–¹å‘å§daprå‘å¸ƒæ¶ˆæ¯åˆ°Kafkaä½œä¸ºè¾“å‡ºç»„ä»¶ï¼ŒæŠŠKafkaè¯»å–æ¶ˆæ¯åˆ°daprä½œä¸ºè¾“å…¥ç»„ä»¶ã€‚
ç»‘å®šçš„å£°æ˜yamlæ–‡ä»¶çš„è§„èŒƒåˆ™å¦‚ä¸‹ï¼š
apiVersion: dapr.io/v1alpha1 kind: Component metadata: name: &amp;lt;NAME&amp;gt; namespace: &amp;lt;NAMESPACE&amp;gt; spec: type: bindings.&amp;lt;TYPE&amp;gt; version: v1 metadata: - name: &amp;lt;NAME&amp;gt; value: &amp;lt;VALUE&amp;gt; å…¶ä¸­metadata.nameåˆ™æ˜¯ç»‘å®šç½®åç§°ï¼Œspec.metadata.nameå’Œspec.metadata.valueåˆ™æ˜¯é…ç½®çš„å±æ€§å’Œå¯¹åº”å€¼ã€‚è¿™ä¸ªå€¼æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°æ¥å£InputBindingæˆ–è€…OutputBindingå®ç°è¾“å…¥ç»‘å®šå’Œè¾“å‡ºç»‘å®š.
type InputBinding interface { Init(metadata Metadata) error Read(handler func(*ReadResponse) ([]byte, error)) error } type OutputBinding interface { Init(metadata Metadata) error Invoke(req *InvokeRequest) (*InvokeResponse, error) Operations() []OperationKind } æ¥ä¸‹æ¥éœ€è¦å®ç°ä¸€ä¸ªç”Ÿæˆå¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªé£ä¹¦æ¨é€Webhookçš„ç»‘å®šç»„ä»¶ï¼Œåˆ™å¯ä»¥ï¼š</description></item><item><title>æ„å»ºå±äºä½ è‡ªå·±çš„dapræœåŠ¡å‘ç°</title><link>https://www.4async.com/2021/05/building-your-own-dapr-service-discovery/</link><pubDate>Sat, 08 May 2021 18:38:00 +0000</pubDate><guid>https://www.4async.com/2021/05/building-your-own-dapr-service-discovery/</guid><description>&lt;img src="https://vip1.loli.io/2022/03/26/uJdVWNeXC6Z3Hq8.png" alt="Featured image of post æ„å»ºå±äºä½ è‡ªå·±çš„dapræœåŠ¡å‘ç°" />å†™åœ¨æœ€å‰: è¿™ç¯‡æ–‡ç« å…¶å®ç®—æ˜¯é©¬åç‚®äº†ï¼Œå› ä¸ºä¸€ç›´æ‹–å»¶ç—‡çš„é—®é¢˜ï¼Œé¡ºå¸¦è¿‡äº†ä¸€ä¸ªäº”ä¸€å‡æœŸï¼Œç»“æœå‘ç°å·²ç»æœ‰ç¤¾åŒºè´¡çŒ®è€…æä¾›äº†Consulçš„æœåŠ¡å‘ç°å®ç°ï¼Œäºæ˜¯æœ¬æ¥å†™äº†ä¸€åŠçš„æ–‡ç« åªèƒ½è¿›è¡Œè°ƒæ•´äº†ã€‚æ‹–å»¶ç—‡å®³äººå•Šï¼å‡ ä¸ªè‰ç¨¿çš„æ–‡ç« çœ‹æ¥è¦å°½å¿«èµ¶å‡ºæ¥äº†ğŸ¤¦â€â™‚ï¸
åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å…¶å®é—ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•å®šä¹‰daprçš„æœåŠ¡å‘ç°å‘¢ï¼Ÿå…¶å®åœ¨åé¢é˜…è¯»daprçš„æºç ä¹‹åä¹Ÿå‰ä¸€ç¯‡æ–‡ç« çš„è¯„è®ºä¸­æåˆ°äº†ç­”æ¡ˆï¼šç›®å‰dapræä¾›äº†å†…ç½®ä¸¤ç§æœåŠ¡å‘ç°æ¨¡å¼ï¼šK8sæ¨¡å¼å’Œç”¨äºç‹¬ç«‹éƒ¨ç½²çš„mDNSæ¨¡å¼ã€‚mDNSæ¨¡å¼åœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸‹å¯èƒ½å­˜åœ¨é—®é¢˜ï¼ˆæ¯”å¦‚è·¨æœºæˆ¿ï¼‰ï¼Œä¸è¿‡æ²¡æœ‰å…³ç³»ï¼ŒdapråŒæ—¶æä¾›äº†å¯æ‰©å±•èƒ½åŠ›ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰è‡ªä¸»çš„æœåŠ¡å‘ç°èƒ½åŠ›æ‰©å±•daprçš„è¾¹ç•Œã€‚
ä» NameResolution åˆ° Resolver æ¥å£ åœ¨ pkg/components/nameresolution/registry.go æ–‡ä»¶ä¸­ï¼Œdaprå®šä¹‰äº†ä¸€ä¸ª NameResolution ç»“æ„ä½“ç”¨äºæœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼š
type ( // NameResolution is a name resolution component definition. NameResolution struct { Name string FactoryMethod func() nr.Resolver } // Registry handles registering and creating name resolution components. Registry interface { Register(components ...NameResolution) Create(name, version string) (nr.Resolver, error) } nameResolutionRegistry struct { resolvers map[string]func() nr.Resolver } ) å…¶ä¸­çœŸæ­£çš„æœåŠ¡è§£æåˆ™æ˜¯ä¾é  components-contrib ä¸­å®ç°äº† Resolver æ¥å£çš„å…·ä½“å®ç°æ‰§è¡Œã€‚
// Resolver is the interface of name resolver.</description></item><item><title>åœ¨éå®¹å™¨(é›†ç¾¤)ç¯å¢ƒä¸‹è¿è¡Œdapr</title><link>https://www.4async.com/2021/03/2021-03-11-running-dapr-without-container/</link><pubDate>Thu, 11 Mar 2021 18:38:00 +0000</pubDate><guid>https://www.4async.com/2021/03/2021-03-11-running-dapr-without-container/</guid><description>&lt;img src="https://vip1.loli.io/2022/03/26/uJdVWNeXC6Z3Hq8.png" alt="Featured image of post åœ¨éå®¹å™¨(é›†ç¾¤)ç¯å¢ƒä¸‹è¿è¡Œdapr" />å‰ä¸€æ®µæ—¶é—´ä¸€ç›´å…³æ³¨çš„dapræ­£å¼å‘å¸ƒäº†v1.0ç‰ˆæœ¬(å®é™…ä¸Šæœ¬æ–‡å‘å¸ƒæ—¶è¿˜æ›´æ–°äº†v1.0.1)ï¼Œä»£è¡¨dapråœ¨æŸäº›ç¨‹åº¦ä¸Šè¿›å…¥ç¨³å®šçŠ¶æ€ï¼Œå¯ä»¥å°è¯•åœ¨å®é™…ä¸­è¿›è¡Œè¿ç”¨ã€‚ä½œä¸ºæˆ‘ä¸€ç›´å…³æ³¨çš„é¡¹ç›®ï¼Œåœ¨ç¬¬ä¸€æ—¶é—´ä¸­è¿›è¡Œäº†å°è¯•ï¼Œå¹¶è¯•å›¾å¼•å…¥å®é™…é¡¹ç›®ä¸­ï¼Œæœ¬æ–‡åˆ™æ˜¯é’ˆå¯¹è¿™äº›çš„ä¸€äº›å…ˆæœŸæµ‹è¯•å†…å®¹.
ä»€ä¹ˆæ˜¯daprï¼Ÿ dapræœ€æ—©æ˜¯ç”±å¾®è½¯å¼€æºçš„(ä¸æ„§æ˜¯ä½ )ï¼Œä¸€ä¸ªå¯ç§»æ¤çš„ã€äº‹ä»¶é©±åŠ¨çš„ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒä½¿ä»»ä½•å¼€å‘è€…éƒ½èƒ½è½»æ¾åœ°æ„å»ºè¿è¡Œåœ¨äº‘å’Œè¾¹ç¼˜çš„å¼¹æ€§ã€æ— çŠ¶æ€/æœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥çµæ´»æ”¯æŒå¤šç§å¼€å‘è¯­è¨€ã€‚æ¢è€Œè¨€ä¹‹ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œdaprå¯ä»¥ä½œä¸ºä¸€ä¸ªserverlessè½åœ°æ–¹æ¡ˆçœ‹å¾…å’Œå¤„ç†ï¼Œå¯¹ç¨‹åºè€Œè¨€ï¼Œåªå…³æ³¨æä¾›çš„storeå’Œæ¶ˆæ¯é˜Ÿåˆ—æ¥å£ï¼Œæ— éœ€å…³å¿ƒæ¶æ„å±‚é¢æ›´å¤šå†…å®¹ã€‚
ä¸è¿‡åœ¨å®˜æ–¹çš„ç¤ºä¾‹æ•™ç¨‹ä¸­ï¼Œä½¿ç”¨çš„ç¯å¢ƒä¸ºå®¹å™¨ç¯å¢ƒéƒ¨ç½²å’Œç®¡ç†daprã€‚å®é™…ä¸Šï¼Œé™¤äº†åœ¨å®¹å™¨ç¯å¢ƒæˆ–è€…å®¹å™¨é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œdaprå¯ä»¥é…ç½®ä¸ºåœ¨æœ¬åœ°æœºå™¨ä¸Šä»¥è‡ªæ‰˜ç®¡æ¨¡å¼è¿è¡Œã€‚
æœ¬åœ°å®‰è£… daprå®‰è£…å¯ä»¥é€šè¿‡å®˜æ–¹çš„dapr-cliå®ç°ï¼Œdapr-cliå¯ä»¥é€šè¿‡ä¸€é”®å®‰è£…å‘½ä»¤å¿«é€Ÿå®‰è£…ï¼š
# wget -q https://raw.githubusercontent.com/dapr/cli/master/install/install.sh -O - | /bin/bash Your system is linux_amd64 Dapr CLI is detected: main: line 86: 43656 Segmentation fault $DAPR_CLI_FILE --version Reinstalling Dapr CLI - /usr/local/bin/dapr... Getting the latest Dapr CLI... Installing v1.0.0 Dapr CLI... Downloading https://github.com/dapr/cli/releases/download/v1.0.0/dapr_linux_amd64.tar.gz ... dapr installed into /usr/local/bin successfully. CLI version: 1.0.0 Runtime version: n/a To get started with Dapr, please visit https://docs.dapr.io/getting-started/ å¯ä»¥é€šè¿‡è¾“å…¥daprå‘½ä»¤ç¡®è®¤dapr-cliç¨‹åºæ˜¯å¦è¢«æ­£å¸¸å®‰è£…æˆåŠŸã€‚
æ¥ä¸‹æ¥ä½¿ç”¨dapr-cliå®‰è£…æ‰€æœ‰çš„runtimeç­‰åº”ç”¨ã€‚
# dapr init --slim âŒ› Making the jump to hyperspace.</description></item></channel></rss>